import streamlit as st
import pandas as pd
import numpy as np
import time


ck = None
f_finished = None

st.title('ä¸å¯æ€è®®çš„æ¸¸æˆï¼šæ•°å­—é™·é˜±')

''
''
st.markdown('''
##### æ¸¸æˆè§„åˆ™ï¼š

1. æŒ‘é€‰ä¸€ä¸ªå¤§äºç­‰äº`10`çš„æ­£æ•´æ•°ï¼ˆ`44`ï¼Œ `6666666666`è¿™ç§å…¨é‡å¤çš„æ•°é™¤å¤–ï¼‰ã€‚
2. å°†å„ä¸ªä½ç½®ä¸Šçš„æ•°å­—ä»å¤§åˆ°å°æ’åˆ—å¾—åˆ°ä¸€ä¸ªæœ€å¤§çš„æ•°ã€‚
3. å†å°†å„ä¸ªæ•°å­—ä»å°åˆ°å¤§æ’åˆ—å¾—åˆ°ä¸€ä¸ªæœ€å°çš„æ•°ã€‚
4. ä¸¤æ•°ç›¸å‡å¾—åˆ°ä¸€ä¸ªæ–°çš„æ•´æ•°ã€‚
5. å¦‚æœæ–°æ•°çš„ä½æ•°å°äºç¬¬ä¸€æ­¥é‡ŒåŸæ•°çš„ä½æ•°ï¼Œå°±æ·»åŠ â€˜0â€™æ¥å‡‘è¶³æ–°æ•°çš„ä½æ•°ã€‚
6. å¯¹æ–°æ•°é‡å¤ä»¥ä¸Šç¬¬2åˆ°ç¬¬5æ­¥ã€‚
7. ç»è¿‡å‡ æ¬¡ `æ’åº` $\Rightarrow$ `ç›¸å‡` $\Rightarrow$ `æ’åº`  $\Rightarrow$ `ç›¸å‡`  çš„é‡å¤è®¡ç®—ä¹‹åï¼ˆæœ‰æ—¶å€™åªéœ€è¦ä¸€ä¸¤æ¬¡ï¼ï¼‰, æœ€ç»ˆä¸€å®šä¼šæ‰è¿›ä¸€ä¸ªâ€œæ•°å­—é™·é˜±â€é‡Œï¼Œä½ ç›¸ä¿¡å—ï¼Ÿ ğŸ˜œ

------
''')


''
''

# st.markdown('##### ä¸¾å‡ ä¸ªæ —å­')
c1, c2, c3 = st.columns(3)

with c1:
    st.markdown('''
    ##### ä¾‹å­1ï¼š4ä½æ•°
    1. ä»`2022`å¼€å§‹
    2. 2220 - 0222 = 1998
    3. 9981 - 1899 = 8082
    4. 8820 - 0288 = 8532
    5. 8532 - 2358 = 6174
    6. 7141 - 1467 = 6174
    7. $\cdots \cdots$
    8. é™·åœ¨ 6174 è¿™ä¸ªé™·é˜±é‡Œäº†
    ''')
    
with c2:
    st.markdown('''
    ##### ä¾‹å­2ï¼š6ä½æ•°
    1. ä»`100174`å¼€å§‹
    2. 741100 - 1147 = 739953
    3. 997533 - 335799 = 661734
    4. 766431 - 134667 = 631764
    5. 766431 - 134667 = 631764
    6. $\cdots \cdots$
    7. é™·åœ¨ 631764 è¿™ä¸ªé™·é˜±é‡Œäº†
    ''')

with c3:
    st.markdown('''
    ##### ä¾‹å­3ï¼š2ä½æ•°
    1. ä»`17`å¼€å§‹
    2. 71 - 17 = 54
    3. 54 - 45 = 9
    4. 90 - 09 = 81
    5. 81 - 18 = 63
    6. 63 - 36 = 27
    7. 72 - 27 = 45
    8. 54 - 45 = 9
    9. $\cdots \cdots$
    10. é™·åœ¨ $9 \Rightarrow 81 \Rightarrow 63 \Rightarrow 27 \Rightarrow 45$ å†åˆ°9çš„å¾ªç¯è¿™ä¸ªé™·é˜±åœˆé‡Œäº†
    ''')


st.markdown('''
------

##### ä¾‹å­4ï¼š10ä½æ•°
1. æŒ‘ä¸ª10ä½æ•°è¯•è¯•ï¼š`9931319652`
2. 9996533211 - 1123356999 = 8873176212
3. 8877632211 - 1122367788 = 7755264423
4. 7765544322 - 2234455677 = 5531088645
5. 8865554310 - 134555688 = 8730998622
6. 9988763220 - 223678899 = 9765084321
7. 9876543210 - 123456789 = 9753086421
8. 9876543210 - 123456789 = 9753086421
9. $\cdots \cdots$
10. é™·åœ¨ 9753086421 è¿™ä¸ªé™·é˜±æ•°é‡Œäº†

------

''')

# st.markdown('''
# ##### ä¾‹å­4ï¼Œæ¥ä¸ª30ä½æ•°è¯•è¯•
# 1. æŒ‘ä¸ª10ä½æ•°ï¼š377372902432111357296702806990 
# 2. 999987777766543333222221110000 - 11122222333345667777789999 = 999976655544209987554443320001
# 3. 999999877665555544444332210000 - 12233444445555566778999999 = 999987644221109988877553210001
# 4. 999999888877765544322211110000 - 11112223445567778888999999 = 999988776654319976543322110001
# 5. 999999887776665544333221111000 - 111122333445566677788999999 = 999888765443219977655432111001
# 6. 999998887776655544433221111100 - 1111122334445556677788899999 = 998887765442209987755432211101
# 7. 999988887777655544432222111100 - 1111222234445556777788889999 = 998877665543209987654433221101
# 8. 999988877766655544433322211100 - 1112223334445556667778889999 = 998876654432209987765543321101
# 9. 999988877766655544433322211100 - 1112223334445556667778889999 = 998876654432209987765543321101
# 9. ............
# 10. é™·åœ¨ 998876654432209987765543321101 è¿™ä¸ªé™·é˜±æ•°é‡Œäº†
# ''')

''
''
''
st.header('è½®åˆ°ä½ æ¥è¯•è¯•äº†')
number = st.text_input('è¯·æŒ‘é€‰ä¸ªæ•´æ•°è¯•è¯•çœ‹ ğŸ‘€')
# st.write(type(number))

if number != '':
    try:
        number = eval(number)
        if not isinstance(number, int):
            st.write('ä½ è¾“å…¥çš„ä¸æ˜¯æ•´æ•°ï¼Œè¯·é‡æ–°è¾“å…¥')
        elif number < 10:
                st.write('ä¸èƒ½å°äº10ï¼Œè¯·é‡æ–°è¾“å…¥')
        else:
            k = len(str(number))
            if number % int('1' * k) == 0:
                st.write('ä¸èƒ½æ‰€æœ‰ä½ç½®ä¸Šçš„æ•°å­—éƒ½ä¸€æ ·ï¼Œè¯·é‡æ–°è¾“å…¥')
            else:
                st.write('æ”¶åˆ°ä½ çš„æ•°å­—äº†ï¼Œå‡†å¤‡å¥½äº†å°±å¼€å§‹å§ ğŸ‘‡')
                ck = st.button('æˆ‘å‡†å¤‡å¥½äº†ï¼Œè®©æˆ‘æ‰åˆ°é™·é˜±é‡Œå§')
    except:
        st.write('ä½ è¾“å…¥çš„ä¸æ˜¯æ•°å€¼ï¼Œè¯·é‡æ–°è¾“å…¥')
    

if ck:
    # Add a placeholder
    'åŠªåŠ›è®¡ç®—ä¸­...'
    latest_iteration = st.empty()
    bar = st.progress(0)
    for i in range(100):
      # Update the progress bar with each iteration.
      latest_iteration.text(f'{i+1}% completed' )
      bar.progress(i + 1)
      time.sleep(0.01)
    
    '...and now we\'re done!'
    f_finished = 1

if f_finished:
    digits = len(str(number))
    steps = 0
    x = number
    history = [x]
    
    while steps < 1000:
        lst = list(str(x))
        lst = [int(x) for x in lst]
        while len(lst) < digits:
            lst.append(0)
    
        lst.sort()
        number_small, number_large = 0, 0
        for i in range(digits):
            number_small = number_small + lst[i] * 10 ** (digits - i - 1)
            number_large = number_large + lst[i] * 10 ** i
    
        diff = number_large - number_small
        steps = steps + 1
        st.write('step', steps, ':', x, '==>', number_large, '-', number_small, '=', diff)
        
        if diff == x:
            st.write('æˆ‘æ‰è¿›é™·é˜±æ•°é‡Œäº†å•¦ï¼ é™·é˜±æ•°æ˜¯' + str(diff))
            break
        elif diff in history:
            trap = history[history.index(diff):]
            for i in history:
                if i in trap:
                    steps = history.index(i)
                    break
            # st.write('æˆ‘æ‰è¿›é™·é˜±åœˆé‡Œäº†å•¦ï¼ é™·é˜±åœˆæ˜¯', trap, 'æ­¥æ•°ï¼š', steps)
            tt = str(trap[0])
            for t in trap[1:]:
                tt = tt + ' --> ' + str(t)
            st.write('æˆ‘æ‰è¿›é™·é˜±åœˆé‡Œäº†å•¦ï¼ é™·é˜±åœˆæ˜¯' + tt)
            break
        else:
            x = diff
            history.append(diff)
    ''
    ''
    st.image('R-C.jpg')
    ''
    st.audio('å°±é—®ä½ æœä¸æœ.m4a')
    st.write('å°±é—®ä½ æœä¸æœ?')
    st.write('have question? Write to me: xiaoxiaoxue_weeee@163.com')
    st.write('æ¬¢è¿å¾®ä¿¡çº¢åŒ…ã€è½¬è´¦ã€‚ã€‚ã€‚ â˜¸â¤')
